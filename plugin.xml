<?xml version='1.0' encoding='utf-8'?>
<plugin id="cordova.appclips.plugin" version="1.0"
	xmlns="http://apache.org/cordova/ns/plugins/1.0"
	xmlns:android="http://schemas.android.com/apk/res/android">
	
	<name>CDVAppClips</name>
	
	<js-module name="CDVAppClips" src="www/CDVAppClips.js">
		<clobbers target="cordova.plugins.appclips" />
	</js-module>

	<!-- URL to open in WebView Instant App -->
	 <preference name="APP_INSTANT_CLIPS_URL"/>

	<platform name="ios">
		<hook type="before_plugin_install" src="scripts/install_prerequisites.js" />
		<hook type="after_plugin_install" src="scripts/add_swift_support.js" />
		<hook type="after_plugin_install" src="scripts/iOS_add_target.js" />
		<config-file parent="/*" target="config.xml">
			<feature name="CDVAppClips">
				<param name="ios-package" value="CDVAppClips" />
			</feature>
		</config-file>
		<source-file src="src/ios/CDVAppClips.swift" />
	</platform>

	<platform name="android">

		<config-file parent="/*" target="res/xml/config.xml">
            <feature name="CDVAppClips">
                <param name="android-package" value="com.outsystems.experts.appclips.CDVAppClips" />
            </feature>

        </config-file>

		<hook type="after_plugin_install" src="hooks/moveInstantApp.js"/>
		<hook type="after_compile" src="hooks/registerInstantAppSettingsGralde.js"/>
		<hook type="after_plugin_install" src="hooks/updateInstantAppUrl.js"/>
		<!-- <hook type="after_plugin_add" src="hooks/moveFilesForInstantApp.js" /> -->

		<!-- Variables strings -->
       	<config-file target="instant-app/src/main/res/values/strings.xml" parent="/*">
            <string name="app_instant_clips_url">$APP_INSTANT_CLIPS_URL</string>
        </config-file>
        <!-- End Variables -->
		
	</platform>
</plugin>